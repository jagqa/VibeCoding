{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getSprints,getUserStories}from'../Services/api';import Loader from'./Loader';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Step2SelectItems=_ref=>{let{projects,setSelectedProject,setSelectedUserStory,onSelected,setError}=_ref;const[sprints,setSprints]=useState([]);const[userStories,setUserStories]=useState([]);const[selectedProjectId,setSelectedProjectId]=useState('');const[selectedSprintPath,setSelectedSprintPath]=useState('');const[selectedStoryId,setSelectedStoryId]=useState('');const[loading,setLoading]=useState({sprints:false,stories:false});useEffect(()=>{if(selectedProjectId){const project=projects.find(p=>p.id===selectedProjectId);setSelectedProject(project);const fetchSprints=async()=>{setLoading(prev=>({...prev,sprints:true}));setError('');try{const response=await getSprints(project.name);setSprints(response.data);}catch(err){setError('Failed to fetch sprints.');}finally{setLoading(prev=>({...prev,sprints:false}));}};fetchSprints();}},[selectedProjectId,projects,setSelectedProject,setError]);useEffect(()=>{if(selectedProjectId&&selectedSprintPath){const project=projects.find(p=>p.id===selectedProjectId);const fetchStories=async()=>{setLoading(prev=>({...prev,stories:true}));setError('');try{const response=await getUserStories(project.name,selectedSprintPath);setUserStories(response.data);}catch(err){setError('Failed to fetch user stories.');}finally{setLoading(prev=>({...prev,stories:false}));}};fetchStories();}},[selectedProjectId,selectedSprintPath,projects,setError]);const handleStorySelection=storyId=>{const story=userStories.find(s=>s.id.toString()===storyId);setSelectedUserStory(story);setSelectedStoryId(storyId);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-700 mb-4\",children:\"Step 2: Select Your Items\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Project\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setSelectedProjectId(e.target.value),className:\"w-full p-2 border border-gray-300 rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select a Project --\"}),projects.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p.id,children:p.name},p.id))]})]}),loading.sprints?/*#__PURE__*/_jsx(Loader,{text:\"Fetching sprints...\"}):sprints.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Sprint\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setSelectedSprintPath(e.target.value),className:\"w-full p-2 border border-gray-300 rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select a Sprint --\"}),sprints.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s.id,children:s.name},s.id))]})]}),loading.stories?/*#__PURE__*/_jsx(Loader,{text:\"Fetching user stories...\"}):userStories.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"User Story\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>handleStorySelection(e.target.value),className:\"w-full p-2 border border-gray-300 rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select a User Story --\"}),userStories.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s.id,children:s.title},s.id))]})]})]}),selectedStoryId&&/*#__PURE__*/_jsx(\"button\",{onClick:onSelected,className:\"mt-8 w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition duration-300\",children:\"Next: Analyze User Story\"})]});};export default Step2SelectItems;","map":{"version":3,"names":["React","useState","useEffect","getSprints","getUserStories","Loader","jsx","_jsx","jsxs","_jsxs","Step2SelectItems","_ref","projects","setSelectedProject","setSelectedUserStory","onSelected","setError","sprints","setSprints","userStories","setUserStories","selectedProjectId","setSelectedProjectId","selectedSprintPath","setSelectedSprintPath","selectedStoryId","setSelectedStoryId","loading","setLoading","stories","project","find","p","id","fetchSprints","prev","response","name","data","err","fetchStories","handleStorySelection","storyId","story","s","toString","children","className","onChange","e","target","value","map","text","length","title","onClick"],"sources":["C:/Users/2425040/VibeCoding/Frontend/src/Components/Step2_SelectItems.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getSprints, getUserStories } from '../Services/api';\r\nimport Loader from './Loader';\r\n\r\nconst Step2SelectItems = ({ projects, setSelectedProject, setSelectedUserStory, onSelected, setError }) => {\r\n  const [sprints, setSprints] = useState([]);\r\n  const [userStories, setUserStories] = useState([]);\r\n  \r\n  const [selectedProjectId, setSelectedProjectId] = useState('');\r\n  const [selectedSprintPath, setSelectedSprintPath] = useState('');\r\n  const [selectedStoryId, setSelectedStoryId] = useState('');\r\n\r\n  const [loading, setLoading] = useState({ sprints: false, stories: false });\r\n\r\n  useEffect(() => {\r\n    if (selectedProjectId) {\r\n      const project = projects.find(p => p.id === selectedProjectId);\r\n      setSelectedProject(project);\r\n\r\n      const fetchSprints = async () => {\r\n        setLoading(prev => ({ ...prev, sprints: true }));\r\n        setError('');\r\n        try {\r\n          const response = await getSprints(project.name);\r\n          setSprints(response.data);\r\n        } catch (err) {\r\n          setError('Failed to fetch sprints.');\r\n        } finally {\r\n          setLoading(prev => ({ ...prev, sprints: false }));\r\n        }\r\n      };\r\n      fetchSprints();\r\n    }\r\n  }, [selectedProjectId, projects, setSelectedProject, setError]);\r\n\r\n  useEffect(() => {\r\n    if (selectedProjectId && selectedSprintPath) {\r\n      const project = projects.find(p => p.id === selectedProjectId);\r\n      const fetchStories = async () => {\r\n        setLoading(prev => ({ ...prev, stories: true }));\r\n        setError('');\r\n        try {\r\n          const response = await getUserStories(project.name, selectedSprintPath);\r\n          setUserStories(response.data);\r\n        } catch (err) {\r\n          setError('Failed to fetch user stories.');\r\n        } finally {\r\n          setLoading(prev => ({ ...prev, stories: false }));\r\n        }\r\n      };\r\n      fetchStories();\r\n    }\r\n  }, [selectedProjectId, selectedSprintPath, projects, setError]);\r\n  \r\n  const handleStorySelection = (storyId) => {\r\n      const story = userStories.find(s => s.id.toString() === storyId);\r\n      setSelectedUserStory(story);\r\n      setSelectedStoryId(storyId);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-2xl font-semibold text-gray-700 mb-4\">Step 2: Select Your Items</h2>\r\n      <div className=\"space-y-6\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Project</label>\r\n          <select onChange={(e) => setSelectedProjectId(e.target.value)} className=\"w-full p-2 border border-gray-300 rounded-md\">\r\n            <option value=\"\">-- Select a Project --</option>\r\n            {projects.map(p => <option key={p.id} value={p.id}>{p.name}</option>)}\r\n          </select>\r\n        </div>\r\n\r\n        {loading.sprints ? <Loader text=\"Fetching sprints...\" /> : sprints.length > 0 && (\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Sprint</label>\r\n            <select onChange={(e) => setSelectedSprintPath(e.target.value)} className=\"w-full p-2 border border-gray-300 rounded-md\">\r\n              <option value=\"\">-- Select a Sprint --</option>\r\n              {sprints.map(s => <option key={s.id} value={s.id}>{s.name}</option>)}\r\n            </select>\r\n          </div>\r\n        )}\r\n\r\n        {loading.stories ? <Loader text=\"Fetching user stories...\" /> : userStories.length > 0 && (\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">User Story</label>\r\n            <select onChange={(e) => handleStorySelection(e.target.value)} className=\"w-full p-2 border border-gray-300 rounded-md\">\r\n              <option value=\"\">-- Select a User Story --</option>\r\n              {userStories.map(s => <option key={s.id} value={s.id}>{s.title}</option>)}\r\n            </select>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {selectedStoryId && (\r\n        <button\r\n          onClick={onSelected}\r\n          className=\"mt-8 w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition duration-300\"\r\n        >\r\n          Next: Analyze User Story\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Step2SelectItems;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}