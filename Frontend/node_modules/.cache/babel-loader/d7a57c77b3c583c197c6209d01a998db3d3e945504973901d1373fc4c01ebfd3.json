{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Step1Connect(_ref){let{setProjects,setError,onConnected}=_ref;const[orgUrl,setOrgUrl]=useState('');const[pat,setPat]=useState('');const[isLoading,setIsLoading]=useState(false);const handleSubmit=async e=>{e.preventDefault();setError('');setIsLoading(true);try{// This endpoint will receive the credentials and use them to fetch projects.\nconst response=await fetch('/api/connect',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({ado_organization_url:orgUrl,ado_pat:pat})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.detail||'Failed to connect to Azure DevOps.');}const data=await response.json();// The backend should return a list of projects.\nsetProjects(data.projects);// Store credentials in session storage to be used by other steps.\n// Note: Storing PATs in sessionStorage is convenient for development but\n// has security implications. For production, consider more secure storage.\nsessionStorage.setItem('ado_organization_url',orgUrl);sessionStorage.setItem('ado_pat',pat);onConnected();}catch(err){setError(err.message);}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"orgUrl\",className:\"block text-sm font-medium text-gray-700\",children:\"Azure DevOps Organization URL\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"orgUrl\",id:\"orgUrl\",className:\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",placeholder:\"https://dev.azure.com/your-organization\",value:orgUrl,onChange:e=>setOrgUrl(e.target.value),required:true})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pat\",className:\"block text-sm font-medium text-gray-700\",children:\"Personal Access Token (PAT)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pat\",id:\"pat\",className:\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",placeholder:\"Enter your PAT\",value:pat,onChange:e=>setPat(e.target.value),required:true})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading||!orgUrl||!pat,className:\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed\",children:isLoading?'Connecting...':'Connect and Fetch Projects'})})]});}export default Step1Connect;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Step1Connect","_ref","setProjects","setError","onConnected","orgUrl","setOrgUrl","pat","setPat","isLoading","setIsLoading","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ado_organization_url","ado_pat","ok","errorData","json","Error","detail","data","projects","sessionStorage","setItem","err","message","onSubmit","className","children","htmlFor","type","name","id","placeholder","value","onChange","target","required","disabled"],"sources":["C:/Users/2425040/VibeCoding/Frontend/src/Components/Step1_Connect.js"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nfunction Step1Connect({ setProjects, setError, onConnected }) {\r\n  const [orgUrl, setOrgUrl] = useState('');\r\n  const [pat, setPat] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      // This endpoint will receive the credentials and use them to fetch projects.\r\n      const response = await fetch('/api/connect', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          ado_organization_url: orgUrl,\r\n          ado_pat: pat,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.detail || 'Failed to connect to Azure DevOps.');\r\n      }\r\n\r\n      const data = await response.json();\r\n      // The backend should return a list of projects.\r\n      setProjects(data.projects);\r\n\r\n      // Store credentials in session storage to be used by other steps.\r\n      // Note: Storing PATs in sessionStorage is convenient for development but\r\n      // has security implications. For production, consider more secure storage.\r\n      sessionStorage.setItem('ado_organization_url', orgUrl);\r\n      sessionStorage.setItem('ado_pat', pat);\r\n\r\n      onConnected();\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      <div>\r\n        <label htmlFor=\"orgUrl\" className=\"block text-sm font-medium text-gray-700\">\r\n          Azure DevOps Organization URL\r\n        </label>\r\n        <div className=\"mt-1\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"orgUrl\"\r\n            id=\"orgUrl\"\r\n            className=\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n            placeholder=\"https://dev.azure.com/your-organization\"\r\n            value={orgUrl}\r\n            onChange={(e) => setOrgUrl(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"pat\" className=\"block text-sm font-medium text-gray-700\">\r\n          Personal Access Token (PAT)\r\n        </label>\r\n        <div className=\"mt-1\">\r\n          <input\r\n            type=\"password\"\r\n            name=\"pat\"\r\n            id=\"pat\"\r\n            className=\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n            placeholder=\"Enter your PAT\"\r\n            value={pat}\r\n            onChange={(e) => setPat(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isLoading || !orgUrl || !pat}\r\n          className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed\"\r\n        >\r\n          {isLoading ? 'Connecting...' : 'Connect and Fetch Projects'}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default Step1Connect;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}